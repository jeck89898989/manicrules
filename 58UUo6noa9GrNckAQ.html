<html><head><base href="https://websim.ai/">
<title>Interactive Guitar Fretboard</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 0;
    margin: 0;
    background-color: #f0f0f0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  
  #navbar {
    background-color: #333;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  #controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  .fretboardContainer {
    width: calc(100% - 40px);
    padding: 20px;
    background-color: #704214;
    border: 2px solid #4a2c0f;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    position: relative;
    overflow-x: auto;
    margin: 20px;
  }
  
  .fretboard {
    position: relative;
    width: 1520px;
    height: 240px;
    background: linear-gradient(to right, #d2691e, #8b4513);
    border: 1px solid #4a2c0f;
  }
  
  .string {
    position: absolute;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #c0c0c0;
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  }
  
  .fret {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #c0c0c0;
    box-shadow: 0 0 3px rgba(0,0,0,0.5);
  }
  
  .note {
    position: absolute;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: #4CAF50;
    border: 2px solid #333;
    transform: translate(-50%, -50%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 12px;
    font-weight: bold;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .note:hover {
    transform: translate(-50%, -50%) scale(1.1);
  }
  
  .open-string {
    left: -12px !important;
  }
  
  .fret-marker {
    position: absolute;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: #f0f0f0;
    opacity: 0.7;
    transform: translateX(-50%);
  }
  
  .string-name {
    position: absolute;
    left: -40px;
    width: 20px;
    text-align: right;
    color: #f0f0f0;
    font-weight: bold;
    font-size: 14px;
  }
  
  select, button, input {
    font-size: 14px;
    padding: 5px;
  }
  
  button {
    background-color: #000000;
    color: white;
    border: 1px solid white;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  
  button:hover {
    background-color: white;
    color: black;
  }
  
  .diagram-title {
    font-size: 18px;
    font-weight: bold;
    color: white;
    margin-bottom: 10px;
  }
  
  .diagram-description {
    font-size: 14px;
    color: white;
    margin-bottom: 15px;
    line-height: 1.4;
  }

  .scale-info {
    font-size: 16px;
    font-weight: bold;
    color: white;
    margin-bottom: 5px;
  }

  #customScaleInput {
    width: 200px;
  }

  #stringSelect {
    width: 200px;
  }

  .scale-description {
    font-size: 14px;
    color: white;
    margin-top: 10px;
    font-style: italic;
  }

  #startFret, #endFret {
    width: 50px;
  }

  .tuning-select {
    width: 60px;
  }

  #tuningControls {
    margin: 10px;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  footer {
    background-color: #000;
    color: #fff;
    text-align: center;
    padding: 20px;
    margin-top: auto;
  }
</style>
</head>
<body>
  <div id="navbar" style="justify-content: flex-start;">
  <div id="tuningControls">
    <select id="tuningPreset" onchange="applyTuningPreset()">
      <option value="standard">Standard (E A D G B E)</option>
      <option value="dropD">Drop D (D A D G B E)</option>
      <option value="openG">Open G (D G D G B D)</option>
      <option value="openD">Open D (D A D F# A D)</option>
      <option value="DADGAD">DADGAD (D A D G A D)</option>
    </select>
    <div class="string-tuning-group">
      <select id="string6" class="tuning-select"></select>
      <select id="string5" class="tuning-select"></select>
      <select id="string4" class="tuning-select"></select>
      <select id="string3" class="tuning-select"></select>
      <select id="string2" class="tuning-select"></select>
      <select id="string1" class="tuning-select"></select>
    </div>
  </div>
  <div id="controls">
    <div class="control-group">
      <select id="scaleSelect">
        <option value="">Select a scale or chord</option>
        <optgroup label="Scales">
          <option value="major" selected="">Major Scale</option>
          <option value="minor">Natural Minor Scale</option>
          <option value="harmonic_minor">Harmonic Minor Scale</option>
          <option value="melodic_minor">Melodic Minor Scale</option>
          <option value="pentatonic_major">Major Pentatonic Scale</option>
          <option value="pentatonic_minor">Minor Pentatonic Scale</option>
          <option value="blues">Blues Scale</option>
          <option value="dorian">Dorian Mode</option>
          <option value="phrygian">Phrygian Mode</option>
          <option value="lydian">Lydian Mode</option>
          <option value="mixolydian">Mixolydian Mode</option>
          <option value="locrian">Locrian Mode</option>
          <option value="whole_tone">Whole Tone Scale</option>
          <option value="diminished">Diminished Scale</option>
        </optgroup>
        <optgroup label="Intervals">
          <option value="minor_second">Minor Second</option>
          <option value="major_second">Major Second</option>
          <option value="minor_third">Minor Third</option>
          <option value="major_third">Major Third</option>
          <option value="perfect_fourth">Perfect Fourth</option>
          <option value="tritone">Tritone</option>
          <option value="perfect_fifth">Perfect Fifth</option>
          <option value="minor_sixth">Minor Sixth</option>
          <option value="major_sixth">Major Sixth</option>
          <option value="minor_seventh">Minor Seventh</option>
          <option value="major_seventh">Major Seventh</option>
          <option value="octave">Octave</option>
        </optgroup>
        <optgroup label="Chords">
          <option value="major_chord">Major Chord</option>
          <option value="minor_chord">Minor Chord</option>
          <option value="dominant_seventh">Dominant 7th</option>
          <option value="major_seventh">Major 7th</option>
          <option value="minor_seventh">Minor 7th</option>
          <option value="diminished">Diminished Chord</option>
          <option value="augmented">Augmented Chord</option>
          <option value="sus4">Sus4 Chord</option>
          <option value="sus2">Sus2 Chord</option>
          <option value="add9">Add9 Chord</option>
          <option value="sixth">6th Chord</option>
          <option value="minor_major_seventh">Minor Major 7th</option>
        </optgroup>
      </select>
      <select id="keySelect" style="width: 100px;">
  <option value="">Select a key</option>
  <option value="C" selected="">C</option>
  <option value="C#">C#</option>
  <option value="D">D</option>
  <option value="D#">D#</option>
  <option value="E">E</option>
  <option value="F">F</option>
  <option value="F#">F#</option>
  <option value="G">G</option>
  <option value="G#">G#</option>
  <option value="A">A</option>
  <option value="A#">A#</option>
  <option value="B">B</option>
</select>
    </div>
    <div class="control-group">
      <select id="stringSelect">
        <option value="123456">All Strings</option>
        <option value="1">String 1 (High E)</option>
        <option value="2">String 2 (B)</option>
        <option value="3">String 3 (G)</option>
        <option value="4">String 4 (D)</option>
        <option value="5">String 5 (A)</option>
        <option value="6">String 6 (Low E)</option>
        <option value="12">Strings 1-2</option>
        <option value="13">Strings 1-3</option>
        <option value="14">Strings 1-4</option>
        <option value="15">Strings 1-5</option>
        <option value="16">Strings 1-6</option>
        <option value="23">Strings 2-3</option>
        <option value="24">Strings 2-4</option>
        <option value="25">Strings 2-5</option>
        <option value="26">Strings 2-6</option>
        <option value="34">Strings 3-4</option>
        <option value="35">Strings 3-5</option>
        <option value="36">Strings 3-6</option>
        <option value="45">Strings 4-5</option>
        <option value="46">Strings 4-6</option>
        <option value="56">Strings 5-6</option>
        <option value="123">Strings 1-2-3</option>
        <option value="124">Strings 1-2-4</option>
        <option value="125">Strings 1-2-5</option>
        <option value="126">Strings 1-2-6</option>
        <option value="134">Strings 1-3-4</option>
        <option value="135">Strings 1-3-5</option>
        <option value="136">Strings 1-3-6</option>
        <option value="145">Strings 1-4-5</option>
        <option value="146">Strings 1-4-6</option>
        <option value="156">Strings 1-5-6</option>
        <option value="234">Strings 2-3-4</option>
        <option value="235">Strings 2-3-5</option>
        <option value="236">Strings 2-3-6</option>
        <option value="245">Strings 2-4-5</option>
        <option value="246">Strings 2-4-6</option>
        <option value="256">Strings 2-5-6</option>
        <option value="345">Strings 3-4-5</option>
        <option value="346">Strings 3-4-6</option>
        <option value="356">Strings 3-5-6</option>
        <option value="456">Strings 4-5-6</option>
      </select>
      <input type="number" id="startFret" min="0" max="19" value="0" placeholder="Start Fret">
      <input type="number" id="endFret" min="0" max="19" value="19" placeholder="End Fret">
    </div>
    <div class="control-group">
      <button onclick="toggleIntervalDisplay()">Interval</button>
      <input type="text" id="customScaleInput" placeholder="Enter custom scale (e.g., 0,2,4,5,7,9,11)" style="width: 150px;">
      <button onclick="addCustomScale()">Add</button>
    </div>
  </div>
</div>

  <div>
  <style>
    .fretboardContainer {
      background-color: #FFFFFF;
      border: 2px solid #CCCCCC;
    }
    
    .diagram-title, .diagram-description, .scale-info, .scale-description {
      color: #333333;
    }

    #woodToneSelect {
      margin-bottom: 10px;
      padding: 5px;
      font-size: 14px;
    }

    .melodic-pattern-controls {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    #playScaleButton, #playMelodicPatternButton {
      margin-bottom: 10px;
      padding: 5px 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #playScaleButton:hover, #playMelodicPatternButton:hover {
      background-color: #45a049;
    }

    #melodicPatternSelect {
      padding: 5px;
      font-size: 14px;
    }

    .audio-controls {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    #audioPlayer {
      width: 100%;
      max-width: 300px;
    }

    #importButton {
      padding: 5px 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #importButton:hover {
      background-color: #45a049;
    }

    #saveDiagramButton {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #008CBA;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }

    #saveDiagramButton:hover {
      background-color: #007B9A;
    }

    .saved-diagrams {
      margin-top: 30px;
      border-top: 2px solid #CCCCCC;
      padding-top: 20px;
    }

    .saved-diagram {
      margin-bottom: 30px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
  <button id="playScaleButton" onclick="playScale()" style="display: block; margin: 20px auto;">Play Scale</button>
  <div class="melodic-pattern-controls" style="display: flex; justify-content: center; align-items: center;">
    <select id="melodicPatternSelect">
      <option value="ascending">Ascending</option>
      <option value="descending">Descending</option>
      <option value="ascendingDescending">Ascending-Descending</option>
      <option value="zigzag">Zig-zag</option>
      <option value="random">Random</option>
      <option value="thirdIntervals">Third Intervals</option>
      <option value="fourthIntervals">Fourth Intervals</option>
      <option value="fifthIntervals">Fifth Intervals</option>
      <option value="arpeggios">Arpeggios</option>
      <option value="sequentialThrees">Sequential Threes</option>
      <option value="sequentialFours">Sequential Fours</option>
      <option value="pentatonicBox">Pentatonic Box</option>
      <option value="bluesLick">Blues Lick</option>
      <option value="jazzChromatic">Jazz Chromatic</option>
      <option value="sweepPicking">Sweep Picking</option>
      <option value="triadInversions">Triad Inversions</option>
      <option value="modalInterchange">Modal Interchange</option>
      <option value="harmonicSequence">Harmonic Sequence</option>
      <option value="diminishedArpeggio">Diminished Arpeggio</option>
      <option value="wholeToneScale">Whole Tone Scale</option>
      <option value="symmetricalPatterns">Symmetrical Patterns</option>
      <option value="threeTonePatterns">Three Tone Patterns</option>
      <option value="fourTonePatterns">Four Tone Patterns</option>
      <option value="alteredScaleLicks">Altered Scale Licks</option>
      <option value="bebopApproachNotes">Bebop Approach Notes</option>
    </select>
    <button id="playMelodicPatternButton" onclick="playMelodicPattern()">Play Melodic Pattern</button>
  </div>
  <select id="woodToneSelect" onchange="changeFretboardColor()" style="display: block; margin: 0 auto;">
    <option value="#704214">Rosewood</option>
    <option value="#D2691E">Maple</option>
    <option value="#8B4513">Mahogany</option>
    <option value="#DEB887">Butterscotch</option>
    <option value="#A0522D">Walnut</option>
    <option value="#000000">Black</option>
    <option value="#FFFFFF">White</option>
    <option value="#F4A460">Honey</option>
    <option value="#8B7355">Koa</option>
    <option value="#CD853F">Ash</option>
    <option value="#D2B48C">Tan</option>
    <option value="#B8860B">Dark Goldenrod</option>
    <option value="#CD5C5C">Indian Red</option>
    <option value="#E6E6FA">Lavender</option>
    <option value="#800000">Maroon</option>
    <option value="#2E8B57">Sea Green</option>
    <option value="#8B4726">Sienna</option>
    <option value="#DAA520">Goldenrod</option>
    <option value="#BDB76B">Dark Khaki</option>
    <option value="#556B2F">Dark Olive Green</option>
    <option value="#8B008B">Dark Magenta</option>
    <option value="#4B0082">Indigo</option>
    <option value="#FF4500">Orange Red</option>
    <option value="#00CED1">Dark Turquoise</option>
    <option value="#9932CC">Dark Orchid</option>
</select>
  <div class="scale-info" style="text-align: center; margin-top: 20px;"></div>
  <h2 class="diagram-title" style="text-align: center;"></h2>
  <p class="diagram-description" style="text-align: center;"></p>
  <div id="fretboard1" class="fretboard" style="margin: 0 auto; display: block;">
    <style>
      /* Existing styles */
    </style>
  </div>
  <div class="scale-description" style="text-align: center;">
    <style>
      /* Existing styles */
    </style>
  </div>
  <button id="saveDiagramButton" onclick="saveDiagram()" style="background-color: black; color: white;">Save Diagram</button>
  <div id="savedDiagrams" class="saved-diagrams"></div>
  <script>
    // ... (existing JavaScript code) ...

    function saveDiagram() {
      const diagramTitle = document.querySelector('.diagram-title').textContent;
      const diagramDescription = document.querySelector('.diagram-description').textContent;
      const scaleInfo = document.querySelector('.scale-info').textContent;
      const scaleDescription = document.querySelector('.scale-description').textContent;
      const fretboardHTML = document.getElementById('fretboard1').outerHTML;

      const savedDiagram = document.createElement('div');
      savedDiagram.className = 'saved-diagram';
      savedDiagram.innerHTML = `
        <h3>${diagramTitle}</h3>
        <p>${diagramDescription}</p>
        <p><strong>${scaleInfo}</strong></p>
        <p>${scaleDescription}</p>
        ${fretboardHTML}
      `;

      const savedDiagrams = document.getElementById('savedDiagrams');
      savedDiagrams.appendChild(savedDiagram);

      alert('Diagram saved successfully!');
    }

    function changeFretboardColor() {
      const woodTone = document.getElementById('woodToneSelect').value;
      const fretboard = document.getElementById('fretboard1');
      fretboard.style.background = `linear-gradient(to right, ${woodTone}, ${getLighterShade(woodTone)})`;
    }

    function getLighterShade(color) {
      // Convert hex to RGB
      let r = parseInt(color.slice(1, 3), 16);
      let g = parseInt(color.slice(3, 5), 16);
      let b = parseInt(color.slice(5, 7), 16);

      // Lighten the color
      r = Math.min(255, r + 50);
      g = Math.min(255, g + 50);
      b = Math.min(255, b + 50);

      // Convert back to hex
      return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
    }

    // Initialize fretboard color
    changeFretboardColor();

    // ... (rest of the existing JavaScript code) ...
  </script>
</div>

  <footer>
  <p style="position: absolute; bottom: 5px; left: 5px; font-size: 0.8em; margin: 0;">© 2024 manicrules.org All rights reserved.</p>
  <div></div>
  <div></div>
  <div>
  <div></div>
</div>
  <div>
</div>
  <script>
    function playScale() {
      const scaleType = scaleSelect.value;
      const key = keySelect.value;
      const keyIndex = notes.indexOf(key);
      const scaleNotes = scales[scaleType].map(interval => notes[(keyIndex + interval) % 12]);
      
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      function playNote(frequency, duration, noteElement) {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'sine';
        oscillator.frequency.value = frequency;
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.start(audioContext.currentTime);
        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration - 0.1);
        oscillator.stop(audioContext.currentTime + duration);

        // Animate all notes with the same name
        const allNoteElements = document.querySelectorAll('.note');
        allNoteElements.forEach(el => {
          if (el.dataset.noteName === noteElement.dataset.noteName) {
            el.style.transform = 'scale(1.2)';
            el.style.boxShadow = '0 0 10px #ff0';
            el.style.transition = 'all 0.2s ease-in-out';

            setTimeout(() => {
              el.style.transform = '';
              el.style.boxShadow = '';
            }, duration * 1000);
          }
        });
      }
      
      function getFrequency(note) {
        const A4 = 440;
        const A4Index = notes.indexOf('A');
        const noteIndex = notes.indexOf(note);
        const octaveOffset = Math.floor((noteIndex - A4Index) / 12);
        const semitonesFromA4 = (noteIndex - A4Index + 12) % 12;
        return A4 * Math.pow(2, octaveOffset + semitonesFromA4 / 12);
      }
      
      scaleNotes.forEach((note, index) => {
        const frequency = getFrequency(note);
        const duration = 0.5; // Duration of each note in seconds
        setTimeout(() => {
          const noteElements = document.querySelectorAll('.note');
          const noteElement = Array.from(noteElements).find(el => el.textContent === note);
          playNote(frequency, duration, noteElement);
        }, index * duration * 1000);
      });
    }

    function playMelodicPattern() {
      const scaleType = scaleSelect.value;
      const key = keySelect.value;
      const keyIndex = notes.indexOf(key);
      const scaleNotes = scales[scaleType].map(interval => notes[(keyIndex + interval) % 12]);
      const pattern = document.getElementById('melodicPatternSelect').value;
      
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      function playNote(frequency, duration, noteElement) {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'sine';
        oscillator.frequency.value = frequency;
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.start(audioContext.currentTime);
        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration - 0.1);
        oscillator.stop(audioContext.currentTime + duration);

        // Animate all notes with the same name
        const allNoteElements = document.querySelectorAll('.note');
        allNoteElements.forEach(el => {
          if (el.dataset.noteName === noteElement.dataset.noteName) {
            el.style.transform = 'scale(1.2)';
            el.style.boxShadow = '0 0 10px #ff0';
            el.style.transition = 'all 0.2s ease-in-out';

            setTimeout(() => {
              el.style.transform = '';
              el.style.boxShadow = '';
            }, duration * 1000);
          }
        });
      }
      
      function getFrequency(note) {
        const A4 = 440;
        const A4Index = notes.indexOf('A');
        const noteIndex = notes.indexOf(note);
        const octaveOffset = Math.floor((noteIndex - A4Index) / 12);
        const semitonesFromA4 = (noteIndex - A4Index + 12) % 12;
        return A4 * Math.pow(2, octaveOffset + semitonesFromA4 / 12);
      }
      
      let melodicPattern;
      switch (pattern) {
        case 'ascending':
          melodicPattern = scaleNotes.slice(0, 8);
          break;
        case 'descending':
          melodicPattern = scaleNotes.slice(0, 8).reverse();
          break;
        case 'ascendingDescending':
          melodicPattern = [...scaleNotes.slice(0, 4), ...scaleNotes.slice(0, 4).reverse()];
          break;
        case 'zigzag':
          melodicPattern = scaleNotes.slice(0, 8).flatMap((note, index) => 
            index % 2 === 0 ? [note, scaleNotes[(index + 1) % 8]] : []
          );
          break;
        case 'random':
          melodicPattern = scaleNotes.slice(0, 8).sort(() => Math.random() - 0.5);
          break;
        case 'thirdIntervals':
          melodicPattern = scaleNotes.slice(0, 8).flatMap((note, index) => 
            [note, scaleNotes[(index + 2) % 8]]
          ).slice(0, 8);
          break;
        case 'fourthIntervals':
          melodicPattern = scaleNotes.slice(0, 8).flatMap((note, index) => 
            [note, scaleNotes[(index + 3) % 8]]
          ).slice(0, 8);
          break;
        case 'fifthIntervals':
          melodicPattern = scaleNotes.slice(0, 8).flatMap((note, index) => 
            [note, scaleNotes[(index + 4) % 8]]
          ).slice(0, 8);
          break;
        case 'arpeggios':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[6], scaleNotes[4], scaleNotes[2], scaleNotes[0], scaleNotes[2]];
          break;
        case 'sequentialThrees':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[2], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[2], scaleNotes[3]];
          break;
        case 'sequentialFours':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[4]];
          break;
        case 'pentatonicBox':
          melodicPattern = [scaleNotes[0], scaleNotes[3], scaleNotes[5], scaleNotes[7], scaleNotes[5], scaleNotes[3], scaleNotes[0], scaleNotes[3]];
          break;
        case 'bluesLick':
          melodicPattern = [scaleNotes[0], scaleNotes[3], scaleNotes[5], scaleNotes[6], scaleNotes[5], scaleNotes[3], scaleNotes[0], scaleNotes[5]];
          break;
        case 'jazzChromatic':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[4], scaleNotes[5], scaleNotes[6], scaleNotes[7]];
          break;
        case 'sweepPicking':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[6], scaleNotes[7], scaleNotes[6], scaleNotes[4], scaleNotes[2]];
          break;
        case 'triadInversions':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[2], scaleNotes[4], scaleNotes[6], scaleNotes[4], scaleNotes[6]];
          break;
        case 'modalInterchange':
          const modalNote = notes[(keyIndex + 1) % 12];
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], modalNote, scaleNotes[5], scaleNotes[4], scaleNotes[2], scaleNotes[0]];
          break;
        case 'harmonicSequence':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[1], scaleNotes[3], scaleNotes[5], scaleNotes[2], scaleNotes[4]];
          break;
        case 'diminishedArpeggio':
          melodicPattern = [scaleNotes[0], scaleNotes[3], scaleNotes[6], scaleNotes[1], scaleNotes[4], scaleNotes[7], scaleNotes[2], scaleNotes[5]];
          break;
        case 'wholeToneScale':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[6], scaleNotes[1], scaleNotes[3], scaleNotes[5], scaleNotes[7]];
          break;
        case 'symmetricalPatterns':
          melodicPattern = [scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[2], scaleNotes[0], scaleNotes[2], scaleNotes[4], scaleNotes[2]];
          break;
        case 'threeTonePatterns':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[2], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[2], scaleNotes[3]];
          break;
        case 'fourTonePatterns':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[1], scaleNotes[2], scaleNotes[3], scaleNotes[4]];
          break;
        case 'alteredScaleLicks':
          melodicPattern = [scaleNotes[0], scaleNotes[1], scaleNotes[3], scaleNotes[4], scaleNotes[6], scaleNotes[8], scaleNotes[10], scaleNotes[0]];
          break;
        case 'bebopApproachNotes':
          melodicPattern = [scaleNotes[0], scaleNotes[7], scaleNotes[6], scaleNotes[7], scaleNotes[1], scaleNotes[0], scaleNotes[7], scaleNotes[0]];
          break;
      }
      
      melodicPattern.forEach((note, index) => {
        const frequency = getFrequency(note);
        const duration = 0.5; // Duration of each note in seconds
        setTimeout(() => {
          const noteElements = document.querySelectorAll('.note');
          const noteElement = Array.from(noteElements).find(el => el.dataset.noteName === note);
          playNote(frequency, duration, noteElement);
        }, index * duration * 1000);
      });

      // Update diagram title and description
      const diagramTitle = document.querySelector('.diagram-title');
      const diagramDescription = document.querySelector('.diagram-description');
      const patternName = document.getElementById('melodicPatternSelect').options[document.getElementById('melodicPatternSelect').selectedIndex].text;
      
      diagramTitle.textContent = `Diagram 1: ${patternName} Melodic Pattern`;
      diagramDescription.textContent = getPatternDescription(pattern);
    }

    function getPatternDescription(pattern) {
      const descriptions = {
        ascending: "This pattern plays the scale notes in ascending order, creating a rising melodic line.",
        descending: "This pattern plays the scale notes in descending order, creating a falling melodic line.",
        ascendingDescending: "This pattern plays the scale notes ascending and then descending, creating a wave-like melodic contour.",
        zigzag: "This pattern alternates between adjacent scale degrees, creating a zig-zag melodic contour.",
        random: "This pattern plays the scale notes in a random order, creating an unpredictable melodic line.",
        thirdIntervals: "This pattern plays notes in intervals of thirds, creating a harmonically rich melodic line.",
        fourthIntervals: "This pattern plays notes in intervals of fourths, creating a open and expansive sound.",
        fifthIntervals: "This pattern plays notes in intervals of fifths, creating a powerful and resonant sound.",
        arpeggios: "This pattern plays the notes of the scale as if they were an arpeggio, outlining the harmony.",
        sequentialThrees: "This pattern plays groups of three adjacent notes, creating a rolling, cyclical melody.",
        sequentialFours: "This pattern plays groups of four adjacent notes, creating a longer, more complex melodic phrase.",
        pentatonicBox: "This pattern uses a typical 'box' shape of the pentatonic scale, common in blues and rock soloing.",
        bluesLick: "This pattern plays a typical blues lick, incorporating the characteristic 'blue notes'.",
        jazzChromatic: "This pattern incorporates chromatic passing tones, creating a jazz-like, complex melodic line.",
        sweepPicking: "This pattern mimics a sweep picking technique, rapidly ascending and descending through the scale.",
        triadInversions: "This pattern outlines the triads within the scale, moving through their inversions.",
        modalInterchange: "This pattern incorporates a note from a parallel mode, adding harmonic complexity and interest.",
        harmonicSequence: "This pattern creates a descending sequence of thirds, a common technique in classical and jazz harmony.",
        diminishedArpeggio: "This pattern outlines a diminished seventh chord, creating tension and an exotic sound.",
        wholeToneScale: "This pattern uses the whole tone scale, creating a dreamy, floating sound without a clear tonal center.",
        symmetricalPatterns: "This pattern creates a symmetrical phrase, mirroring itself halfway through.",
        threeTonePatterns: "This pattern uses groups of three notes to create a rolling, triplet-like feel.",
        fourTonePatterns: "This pattern uses groups of four notes to create a more complex, interlocking melodic line.",
        alteredScaleLicks: "This pattern incorporates notes from the altered scale, creating a tense, outside sound often used in jazz.",
        bebopApproachNotes: "This pattern uses chromatic approach notes in a bebop style, creating a swinging, jazzy feel."
      };

      return descriptions[pattern] || "This pattern creates a unique melodic line based on the selected scale.";
    }

    // ... (rest of the existing script)
  </script>
</footer>

  <script>
    // ... (The rest of the JavaScript remains the same)
  </script>


  <script>
    const fretboards = [
      document.getElementById('fretboard1')
    ];
    const scaleSelect = document.getElementById('scaleSelect');
    const keySelect = document.getElementById('keySelect');
    const stringSelect = document.getElementById('stringSelect');
    const startFretInput = document.getElementById('startFret');
    const endFretInput = document.getElementById('endFret');
    const containerWidth = fretboards[0].offsetWidth;
    const containerHeight = fretboards[0].offsetHeight;
    const stringSpacing = containerHeight / 7;
    const fretSpacing = containerWidth / 20; // Adjusted for 19 frets
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    let allOpenStrings = ['E', 'A', 'D', 'G', 'B', 'E'];
    
    let scales = {
      major: [0, 2, 4, 5, 7, 9, 11],
      minor: [0, 2, 3, 5, 7, 8, 10],
      harmonic_minor: [0, 2, 3, 5, 7, 8, 11],
      melodic_minor: [0, 2, 3, 5, 7, 9, 11],
      pentatonic_major: [0, 2, 4, 7, 9],
      pentatonic_minor: [0, 3, 5, 7, 10],
      blues: [0, 3, 5, 6, 7, 10],
      dorian: [0, 2, 3, 5, 7, 9, 10],
      phrygian: [0, 1, 3, 5, 7, 8, 10],
      lydian: [0, 2, 4, 6, 7, 9, 11],
      mixolydian: [0, 2, 4, 5, 7, 9, 10],
      locrian: [0, 1, 3, 5, 6, 8, 10],
      whole_tone: [0, 2, 4, 6, 8, 10],
      diminished: [0, 2, 3, 5, 6, 8, 9, 11],
      minor_second: [0, 1],
      major_second: [0, 2],
      minor_third: [0, 3],
      major_third: [0, 4],
      perfect_fourth: [0, 5],
      tritone: [0, 6],
      perfect_fifth: [0, 7],
      minor_sixth: [0, 8],
      major_sixth: [0, 9],
      minor_seventh: [0, 10],
      major_seventh: [0,
 11],
      octave: [0, 12],
      major_chord: [0, 4, 7],
      minor_chord: [0, 3, 7],
      dominant_seventh: [0, 4, 7, 10],
      major_seventh: [0, 4, 7, 11],
      minor_seventh: [0, 3, 7, 10],
      diminished: [0, 3, 6],
      augmented: [0, 4, 8],
      sus4: [0, 5, 7],
      sus2: [0, 2, 7],
      add9: [0, 4, 7, 14],
      sixth: [0, 4, 7, 9],
      minor_major_seventh: [0, 3, 7, 11]
    };
    
    let scaleIntervals = {
      major: ['1', '2', '3', '4', '5', '6', '7'],
      minor: ['1', '2', '♭3', '4', '5', '♭6', '♭7'],
      harmonic_minor: ['1', '2', '♭3', '4', '5', '♭6', '7'],
      melodic_minor: ['1', '2', '♭3', '4', '5', '6', '7'],
      pentatonic_major: ['1', '2', '3', '5', '6'],
      pentatonic_minor: ['1', '♭3', '4', '5', '♭7'],
      blues: ['1', '♭3', '4', '♭5', '5', '♭7'],
      dorian: ['1', '2', '♭3', '4', '5', '6', '♭7'],
      phrygian: ['1', '♭2', '♭3', '4', '5', '♭6', '♭7'],
      lydian: ['1', '2', '3', '#4', '5', '6', '7'],
      mixolydian: ['1', '2', '3', '4', '5', '6', '♭7'],
      locrian: ['1', '♭2', '♭3', '4', '♭5', '♭6', '♭7'],
      whole_tone: ['1', '2', '3', '#4', '#5', '#6'],
      diminished: ['1', '2', '♭3', '4', '♭5', '♭6', '6', '7'],
      minor_second: ['1', '♭2'],
      major_second: ['1', '2'],
      minor_third: ['1', '♭3'],
      major_third: ['1', '3'],
      perfect_fourth: ['1', '4'],
      tritone: ['1', '#4'],
      perfect_fifth: ['1', '5'],
      minor_sixth: ['1', '♭6'],
      major_sixth: ['1', '6'],
      minor_seventh: ['1', '♭7'],
      major_seventh: ['1', '7'],
      octave: ['1', '8'],
      major_chord: ['1', '3', '5'],
      minor_chord: ['1', '♭3', '5'],
      dominant_seventh: ['1', '3', '5', '♭7'],
      major_seventh: ['1', '3', '5', '7'],
      minor_seventh: ['1', '♭3', '5', '♭7'],
      diminished: ['1', '♭3', '♭5'],
      augmented: ['1', '3', '#5'],
      sus4: ['1', '4', '5'],
      sus2: ['1', '2', '5'],
      add9: ['1', '3', '5', '9'],
      sixth: ['1', '3', '5', '6'],
      minor_major_seventh: ['1', '♭3', '5', '7']
    };

    let scaleIntervalsRoman = {
      major: ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII'],
      minor: ['i', 'ii', '♭III', 'iv', 'v', '♭VI', '♭VII'],
      harmonic_minor: ['i', 'ii', '♭III', 'iv', 'v', '♭VI', 'VII'],
      melodic_minor: ['i', 'ii', '♭III', 'iv', 'v', 'VI', 'VII'],
      pentatonic_major: ['I', 'II', 'III', 'V', 'VI'],
      pentatonic_minor: ['i', '♭III', 'iv', 'v', '♭VII'],
      blues: ['i', '♭III', 'iv', '♭V', 'v', '♭VII'],
      dorian: ['i', 'ii', '♭III', 'IV', 'v', 'VI', '♭VII'],
      phrygian: ['i', '♭II', '♭III', 'iv', 'v', '♭VI', '♭VII'],
      lydian: ['I', 'II', 'III', '#IV', 'V', 'VI', 'VII'],
      mixolydian: ['I', 'II', 'III', 'IV', 'V', 'VI', '♭VII'],
      locrian: ['i', '♭II', '♭III', 'iv', '♭v', '♭VI', '♭VII'],
      whole_tone: ['I', 'II', 'III', '#IV', '#V', '#VI'],
      diminished: ['i', 'ii', '♭III', 'iv', '♭v', '♭VI', 'VI', 'VII'],
      minor_second: ['i', '♭II'],
      major_second: ['I', 'II'],
      minor_third: ['i', '♭III'],
      major_third: ['I', 'III'],
      perfect_fourth: ['I', 'IV'],
      tritone: ['I', '#IV'],
      perfect_fifth: ['I', 'V'],
      minor_sixth: ['i', '♭VI'],
      major_sixth: ['I', 'VI'],
      minor_seventh: ['i', '♭VII'],
      major_seventh: ['I', 'VII'],
      octave: ['I', 'VIII'],
      major_chord: ['I', 'III', 'V'],
      minor_chord: ['i', '♭III', 'v'],
      dominant_seventh: ['I', 'III', 'V', '♭VII'],
      major_seventh: ['I', 'III', 'V', 'VII'],
      minor_seventh: ['i', '♭III', 'v', '♭VII'],
      diminished: ['i', '♭III', '♭V'],
      augmented: ['I', 'III', '#V'],
      sus4: ['I', 'IV', 'V'],
      sus2: ['I', 'II', 'V'],
      add9: ['I', 'III', 'V', 'IX'],
      sixth: ['I', 'III', 'V', 'VI'],
      minor_major_seventh: ['i', '♭III', 'v', 'VII']
    };
    
    let showIntervals = 0; // 0: Note names, 1: Intervals, 2: Roman numerals
    
    fretboards.forEach((fretboard, index) => {
      // Create strings
      for (let i = 0; i < 6; i++) {
        const string = document.createElement('div');
        string.className = 'string';
        string.style.top = `${stringSpacing * (i + 1)}px`;
        fretboard.appendChild(string);

        const stringName = document.createElement('div');
        stringName.className = 'string-name';
        stringName.textContent = allOpenStrings[5 - i];
        stringName.style.top = `${stringSpacing * (i + 1) - 10}px`;
        fretboard.parentElement.appendChild(stringName);
      }
      
      // Create frets
      for (let i = 0; i <= 19; i++) {
        const fret = document.createElement('div');
        fret.className = 'fret';
        fret.style.left = `${i * fretSpacing}px`;
        fretboard.appendChild(fret);
      }
      
      // Add fret markers
      [3, 5, 7, 9, 12, 15, 17, 19].forEach(fret => {
        const marker = document.createElement('div');
        marker.className = 'fret-marker';
        marker.style.left = `${(fret - 0.5) * fretSpacing}px`;
        marker.style.top = '50%';
        fretboard.appendChild(marker);
        
        if (fret === 12) {
          const secondMarker = marker.cloneNode();
          secondMarker.style.top = '25%';
          fretboard.appendChild(secondMarker);
        }
      });
    });
    
    function showAllScales() {
      const scaleType = scaleSelect.value;
      const key = keySelect.value;
      const selectedStrings = stringSelect.value.split('').map(Number);
      const startFret = parseInt(startFretInput.value);
      const endFret = parseInt(endFretInput.value);
      
      if (!scaleType || !key) {
        alert("Please select both a scale/chord and a key.");
        return;
      }
      
      if (startFret > endFret) {
        alert("Start fret cannot be greater than end fret.");
        return;
      }
      
      clearAllFretboards();
      
      fretboards.forEach((fretboard, index) => {
        showScale(fretboard, index, selectedStrings, startFret, endFret);
      });

      // Update scale info for each diagram
      const scaleInfoElements = document.querySelectorAll('.scale-info');
      scaleInfoElements.forEach(element => {
        const scaleNotes = getScaleNotes(key, scaleType);
        const scaleIntervals = getScaleIntervals(scaleType);
        element.textContent = `${key} ${scaleSelect.options[scaleSelect.selectedIndex].text}: ${scaleNotes.join(', ')} (${scaleIntervals.join(', ')})`;
      });

      // Update scale description
      updateScaleDescription(scaleType, key);
    }
    
    function showScale(fretboard, fretboardIndex, selectedStrings, startFret, endFret) {
      const scaleType = scaleSelect.value;
      const key = keySelect.value;
      
      const keyIndex = notes.indexOf(key);
      const scaleNotes = scales[scaleType].map(interval => notes[(keyIndex + interval) % 12]);
      
      for (let stringIndex = 0; stringIndex < 6; stringIndex++) {
        if (!selectedStrings.includes(6 - stringIndex)) continue;
        
        const openStringNote = allOpenStrings[5 -stringIndex];
        const openStringIndex = notes.indexOf(openStringNote);
        
        // Add open string note if startFret is 0
        if (startFret === 0) {
          const openNoteIndex = scaleNotes.indexOf(openStringNote);
          addNote(fretboard, -1, openStringNote, openNoteIndex !== -1 ? openNoteIndex : null, stringIndex);
        }
        
        for (let fret = startFret; fret <= endFret; fret++) {
          const noteIndex = (openStringIndex + fret + 1) % 12;
          const noteName = notes[noteIndex];
          
          const scaleNoteIndex = scaleNotes.indexOf(noteName);
          if (scaleNoteIndex !== -1 || fret === -1) {
            addNote(fretboard, fret, noteName, scaleNoteIndex, stringIndex);
          }
        }
      }
    }
    
    function addNote(fretboard, fret, noteName, scaleNoteIndex, stringIndex) {
      const note = document.createElement('div');
      note.className = 'note';
      if (scaleNoteIndex !== null) {
        note.classList.add('scale-note');
      } else {
        note.classList.add('user-note');
      }
      if (fret === -1) {
        note.classList.add('open-string');
      }
      note.style.left = `${(fret + 0.5) * fretSpacing}px`;
      note.style.top = `${stringSpacing * (stringIndex + 1)}px`;
      note.textContent = getNoteText(noteName, scaleNoteIndex);
      note.dataset.noteName = noteName;
      note.dataset.interval = scaleNoteIndex !== null ? scaleIntervals[scaleSelect.value][scaleNoteIndex] : '';
      note.dataset.romanInterval = scaleNoteIndex !== null ? scaleIntervalsRoman[scaleSelect.value][scaleNoteIndex] : '';
      note.onclick = handleNoteClick;
      note.clickCount = 0;
      fretboard.appendChild(note);
    }
    
    function getNoteText(noteName, scaleNoteIndex) {
      if (scaleNoteIndex === null) return noteName;
      switch (showIntervals) {
        case 0: return noteName;
        case 1: return scaleIntervals[scaleSelect.value][scaleNoteIndex];
        case 2: return scaleIntervalsRoman[scaleSelect.value][scaleNoteIndex];
      }
    }
    
    function handleNoteClick(event) {
      const note = event.target;
      note.clickCount++;
      
      if (note.clickCount === 1) {
        note.classList.toggle('user-note');
        note.classList.toggle('scale-note');
      } else if (note.clickCount === 3) {
        note.remove();
      }
      
      // Reset click count after a short delay
      setTimeout(() => {
        note.clickCount = 0;
      }, 300);
    }
    
    function clearAllFretboards() {
      fretboards.forEach(fretboard => {
        const notes = fretboard.querySelectorAll('.note');
        notes.forEach(note => note.remove());
      });

      // Clear scale info
      const scaleInfoElements = document.querySelectorAll('.scale-info');
      scaleInfoElements.forEach(element => {
        element.textContent = '';
      });

      // Clear scale description
      document.querySelector('.scale-description').textContent = '';
    }
    
    function toggleIntervalDisplay() {
      showIntervals = (showIntervals + 1) % 3;
      const notes = document.querySelectorAll('.note');
      notes.forEach(note => {
        if (note.classList.contains('scale-note')) {
          note.textContent = getNoteText(note.dataset.noteName, scaleIntervals[scaleSelect.value].indexOf(note.dataset.interval));
        }
      });
    }
    
    function getScaleNotes(key, scaleType) {
      const keyIndex = notes.indexOf(key);
      return scales[scaleType].map(interval => notes[(keyIndex + interval) % 12]);
    }
    
    function getScaleIntervals(scaleType) {
      return scaleIntervals[scaleType];
    }
    
    function addCustomScale() {
      const customScaleInput = document.getElementById('customScaleInput');
      const customScaleName = prompt("Enter a name for your custom scale:");
      if (!customScaleName) return;
      
      const customScaleIntervals = customScaleInput.value.split(',').map(Number);
      if (customScaleIntervals.some(isNaN)) {
        alert("Invalid input. Please enter comma-separated numbers.");
        return;
      }
      
      scales[customScaleName] = customScaleIntervals;
      scaleIntervals[customScaleName] = customScaleIntervals.map(interval => interval.toString());
      scaleIntervalsRoman[customScaleName] = customScaleIntervals.map(interval => 'C' + interval.toString());
      
      const option = document.createElement('option');
      option.value = customScaleName;
      option.textContent = customScaleName;
      scaleSelect.appendChild(option);
      scaleSelect.value = customScaleName;
      
      customScaleInput.value = '';
      showAllScales();
    }

    function updateScaleDescription(scaleType, key) {
      const descriptionElement = document.querySelector('.scale-description');
      const descriptions = {
        major: "The major scale is the foundation of Western music theory, consisting of seven notes with a bright and happy sound.",
        minor: "The natural minor scale has a darker, more melancholic sound compared to the major scale. It's often used in sad or introspective music.",
        harmonic_minor: "The harmonic minor scale is similar to the natural minor but with a raised 7th degree, giving it a distinct, exotic flavor often used in classical and metal music.",
        melodic_minor: "The melodic minor scale has a raised 6th and 7th when ascending, but descends as a natural minor. It's commonly used in jazz improvisation.",
        pentatonic_major: "The major pentatonic scale is a five-note scale that creates a bright, uplifting sound. It's widely used in folk, rock, and blues music.",
        pentatonic_minor: "The minor pentatonic scale is a five-note scale with a bluesy, soulful sound. It's a staple in rock, blues, and many other genres.",
        blues: "The blues scale adds a flatted 5th (blue note) to the minor pentatonic, creating the characteristic 'bluesy' sound central to blues and rock music.",
        dorian: "The Dorian mode is similar to the natural minor but with a raised 6th, giving it a slightly brighter sound. It's often used in jazz and rock.",
        phrygian: "The Phrygian mode has a distinctive exotic sound due to its lowered 2nd degree. It's common in flamenco and metal music.",
        lydian: "The Lydian mode is like a major scale with a raised 4th, giving it a dreamy, floating quality. It's often used in film scores and jazz.",
        mixolydian: "The Mixolydian mode is similar to the major scale but with a lowered 7th. It has a bluesy quality and is common in rock and jazz.",
        locrian: "The Locrian mode is the most dissonant of the modes, with a lowered 2nd and 5th. It's rarely used as a central tonality but can add interesting color.",
        whole_tone: "The whole tone scale is made up entirely of whole steps, creating a dreamy, floating sound without a clear tonal center.",
        diminished: "The diminished scale alternates half and whole steps, creating a symmetrical pattern used in jazz for its tension-building properties.",
        minor_second: "The minor second is the smallest interval in Western music, creating a high tension 'rub' often used for dramatic effect.",
        major_second: "The major second is a whole step interval, forming the basis of many scale patterns and melodic movements.",
        minor_third: "The minor third is a foundational interval in minor chords and scales, often associated with a sad or melancholic sound.",
        major_third: "The major third is a key component of major chords and scales, generally perceived as bright and happy.",
        perfect_fourth: "The perfect fourth is a consonant interval often used in harmony and as the basis for many chord voicings.",
        tritone: "The tritone, also known as the devil's interval, is highly dissonant and was once forbidden in medieval music. It's now used for its tension-building properties.",
        perfect_fifth: "The perfect fifth is a highly consonant interval, forming the backbone of many chords and power chords in rock music.",
        minor_sixth: "The minor sixth has a melancholic quality and is often used in emotional ballads and jazz harmony.",
        major_sixth: "The major sixth has a sweet, consonant sound and is frequently used in major key melodies and harmonies.",
        minor_seventh: "The minor seventh is a key component of dominant seventh chords and adds a bluesy quality to melodies.",
        major_seventh: "The major seventh creates a bright, slightly dissonant sound often used in jazz and sophisticated pop harmonies.",
        octave: "The octave is the most consonant interval, perceived as the same note at a higher or lower pitch.",
        major_chord: "The major chord, consisting of a root, major third, and perfect fifth, forms the basis of major key harmony with its bright, stable sound.",
        minor_chord: "The minor chord, with its root, minor third, and perfect fifth, is the foundation of minor key harmony, often perceived as sad or introspective.",
        dominant_seventh: "The dominant seventh chord adds tension to the major chord with a minor seventh, often used to create a strong pull towards resolution.",
        major_seventh: "The major seventh chord adds a major seventh to a major tr iad, creating a lush, sophisticated sound often used in jazz and contemporary pop.",
        minor_seventh: "The minor seventh chord adds a minor seventh to a minor triad, creating a softer, more melancholic version of the dominant seventh sound.",
        diminished: "The diminished chord consists of two stacked minor thirds, creating a highly unstable sound often used for dramatic effect or as a passing chord.",
        augmented: "The augmented chord raises the fifth of a major chord, creating an unstable, tension-filled sound often used in transitional passages.",
        sus4: "The sus4 chord replaces the third with a perfect fourth, creating an open, ambiguous sound that wants to resolve.",
        sus2: "The sus2 chord replaces the third with a major second, creating a bright, open sound often used in folk and rock music.",
        add9: "The add9 chord adds a ninth (or second) to a triad without the seventh, creating a rich, colorful sound popular in jazz and pop.",
        sixth: "The sixth chord adds a major sixth to a triad, creating a sweet, jazzy sound often used as a substitute for the tonic chord.",
        minor_major_seventh: "The minor major seventh chord combines a minor triad with a major seventh, creating a complex, bittersweet sound often used in jazz and film scores."
      };

      descriptionElement.textContent = descriptions[scaleType] || `The ${scaleType} scale in the key of ${key}.`;
    }

    function applyTuningPreset() {
      const preset = document.getElementById('tuningPreset').value;
      let newTuning;

      switch (preset) {
        case 'standard':
          newTuning = ['E', 'A', 'D', 'G', 'B', 'E'];
          break;
        case 'dropD':
          newTuning = ['D', 'A', 'D', 'G', 'B', 'E'];
          break;
        case 'openG':
          newTuning = ['D', 'G', 'D', 'G', 'B', 'D'];
          break;
        case 'openD':
          newTuning = ['D', 'A', 'D', 'F#', 'A', 'D'];
          break;
        case 'DADGAD':
          newTuning = ['D', 'A', 'D', 'G', 'A', 'D'];
          break;
        default:
          return;
      }

      allOpenStrings = newTuning;
      updateTuningSelects();
      updateStringNames();
      showAllScales();
    }

    function updateTuningSelects() {
      for (let i = 1; i <= 6; i++) {
        const select = document.getElementById(`string${i}`);
        select.value = allOpenStrings[6 - i];
      }
    }

    function updateStringNames() {
      const stringNames = document.querySelectorAll('.string-name');
      stringNames.forEach((stringName, index) => {
        stringName.textContent = allOpenStrings[5 - index];
      });
    }

    function changeTuning(stringNumber, newNote) {
      allOpenStrings[6 - stringNumber] = newNote;
      updateStringNames();
      showAllScales();
    }

    // Initialize tuning selects
    for (let i = 1; i <= 6; i++) {
      const select = document.getElementById(`string${i}`);
      notes.forEach(note => {
        const option = document.createElement('option');
        option.value = note;
        option.textContent = note;
        select.appendChild(option);
      });
      select.value = allOpenStrings[6 - i];
      select.onchange = () => changeTuning(i, select.value);
    }

    // Event listeners
    scaleSelect.addEventListener('change', showAllScales);
    keySelect.addEventListener('change', showAllScales);
    stringSelect.addEventListener('change', showAllScales);
    startFretInput.addEventListener('change', showAllScales);
    endFretInput.addEventListener('change', showAllScales);

    // Initial scale display
    showAllScales();
  </script>
</body>
</html>